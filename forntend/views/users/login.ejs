<% layout("/layouts/boilerplates.ejs") %>
<link rel="stylesheet" type="text/css" href="/css/signin.css">
<style>
    input:-webkit-autofill {
        background-color: #000 !important;
        /* Set background to match your design */
        color: #fff !important;
        /* Text color to ensure readability */
        -webkit-text-fill-color: #fff !important;
        /* Text color for autofilled content */
        transition: background-color 5000s ease-in-out 0s;
        /* Prevent flash */
    }
    .descrptt{
        text-align: justify;
    }

    .password-container {
    position: relative;
    margin-left: 0.2rem;
}

.password-toggle {
    position: absolute;
    right: 35px;
    top: 40%;
    transform: translateY(-50%);
    cursor: pointer;
    color: white;
  

}


</style>
    <!-- HEADER-SECTION -->
   
    <div class="home-header-section" >
        <header class="header home-header-section">
            <div class="main-header">
                <div class="container">
                    <nav class="navbar navbar-expand-lg navbar-light p-0">
                        <a class="navbar-brand pt-0" href="/"><img src="/images/redlight-logo.png" alt=""
                                class="logo" /></a>
                        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                            <span class="navbar-toggler-icon"></span>
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav">
                                <li class="nav-item ">
                                    <a class="nav-link text-decoration-none navbar-text-color home-margin-top"
                                        href="/">Home</a>
                                </li>
                                <!-- <span class="sr-only">(current)</span> -->
                                <li class="nav-item">
                                    <a class="nav-link text-decoration-none navbar-text-color" href="/about">About</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-decoration-none navbar-text-color" href="/und">Services</a>
                                </li>

                                <li class="nav-item dropdown redlight-dropdown ">
                                    <a class="nav-link dropdown-toggle " href="/und" id="navbarDropdown2" role="button" data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">Blogs</a>
                                    <div class="dropdown-menu dropdown-content-redlight blogs-section-drop-down">
                                        <ul class="list-unstyled">
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link" href="/und">Events</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link" href="/und">Up
                                                    coming Events</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link" href="/und">Blogs</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link" href="/und">Projects</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link" href="/und">Notice</a></li>

                                        </ul>
                                        </div>
                                        </li>
                                        <% if(curUser && (curUser.role =="communityMember" || curUser.role =="admin")){ %>
                                        <li class="nav-item dropdown redlight-dropdown ">
                                            <a class="nav-link dropdown-toggle " href="/account" id="navbarDropdown2" role="button"
                                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Control Panel</a>
                                            <div class="dropdown-menu dropdown-content-redlight blogs-section-drop-down">
                                                <ul class="list-unstyled">
                                                    <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                            href="/admin/distributecertification">Certificate</a></li>
                                                    <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                            href="/account">Account</a></li>
                                                    <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                            href="/account/promotion">Promotion & Users</a></li>
                                                   
        
                                                </ul>
                                            </div>
                                        </li>
                                        <% } %>
                                        <li class="nav-item navbar-text-color "><a class="nav-link text-decoration-none contact-us-margin navbar-text-color"
                                                href="/und">Courses</a></li>
                                        <li class="nav-item navbar-text-color "><a class="nav-link text-decoration-none contact-us-margin navbar-text-color"
                                                href="/und">Meetings</a></li>
                                                <li class="nav-item ">
                                                    <a class="nav-link text-decoration-none navbar-text-color " href="/contactus">Contact
                                                        Us</a>
                                                </li>
                                        </ul>
                                        <hr>

                            <ul class="navbar-nav ">
                                <li class="nav-item dropdown redlight-dropdown">
                                    <a class="nav-link dropdown-toggle " href="/profile" id="navbarDropdown" role="button" data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">Profile</a>

                                    <div class="dropdown-menu dropdown-content-redlight">
                                        <ul class="list-unstyled">
                                            <% if(!curUser){%>
                                                <li class="nav-item"> <a class="dropdown-item nav-link" href="/user/login">Login</a>
                                                </li>
                                                <li class="nav-item"> <a class="dropdown-item nav-link" href="/user/signup">Sing
                                                        Up</a></li>
                                                <% } if(curUser){%>
                                                    <li class="nav-item"> <a class="dropdown-item nav-link" href="/profile">Profile</a></li>
                                                    <li class="nav-item"> <a class="dropdown-item nav-link" href="/user/logout">Log
                                                            out</a></li>
                                                    <% }%>

                                        </ul>
                                        </div>
                                        </li>
                                        </ul>

                        </div>
                        </nav>
                        </div>
                        </div>
                        </header>


    </div>

            <section class="tint">
        
                <div class="tintt">
        
                    <div class="form_all">
        
                        <div class="form_left">
        
                            <h1>Welcome Home</h1>
        
                            <p class="descrptt">In today's digital world, cybersecurity is more important than ever. Our platform provides state-of-the-art protection against cyber threats, helping you safeguard your personal and business data. From advanced encryption to real-time monitoring, we ensure your online presence remains secure, private, and protected from evolving cyber risks.</p>

        
                            <div class="btn">
        
                            <a href="/user/signup"><button>SIGN UP</button></a>
        
        
                            </div>
        
                        </div>
                    
                        <div class="form_right">
        
                            <form action="/user/login" method="post" class="needs-validation " novalidate>
        
                                <h3>Sign IN</h3>
        
                                <div class="input">
                                    <input type="email" required name="username" id="exampleInputEmail1"
                                        placeholder="Enter your Email">
                                        <div class="password-container">
                                            <input type="password" required name="password" class="frm-control" id="inputPassword"
                                                placeholder="Enter your password" autocomplete="current-password" />
                                            <span toggle="#inputPassword" class="fa fa-eye password-toggle" id="togglePassword"></span>
                                        </div>
                                </div>
        
                                <div class="right_btn">
        
                                    <button type="submit" onclick="dothis()" class="btn btn-success mb-5">SIGN IN</button>
                                </div>
        
                                <!-- <a href="">Forget password</a> -->
        
                            </form>
        
                        </div>

</div>
</div>
</section>


<!-- new -->
<script>



document.getElementById("loginForm").addEventListener("submit", function(event) {
    event.preventDefault(); // Prevent the form from submitting immediately

    spiner.style.visibility = "visible"
 
    fetch("/user/login", {
        method: "POST",
        body: new FormData(this)
    })
    .then(response => response.json())
    .then(data => {
        // Handle the response from the server (e.g., if login is successful)
        spiner.style.visibility = "hidden"; // Hide spinner once done
        console.log(data);
    })
    .catch(error => {
        spiner.style.visibility = "hidden"; // Hide spinner on error
        console.error("Error:", error);
    });
});


const togglePassword = document.querySelector("#togglePassword");
const toggleConfirmPassword = document.querySelector("#toggleConfirmPassword");
const password = document.querySelector("#inputPassword");



    togglePassword.addEventListener("click", function () {
    // Toggle the type of the password field
    const type = password.type === "password" ? "text" : "password";
    password.type = type;
    // Toggle the eye icon
    this.classList.toggle("fa-eye-slash");
});

</script>
    <script>
        // Get the current page path
        const currentPath = window.location.pathname;

        const pathname = {
            '/profile/edit': 'editprofile',
            '/': 'Home',
            '/user/login': 'Login',
            '/profile': 'Profile',
            
            '/account': 'Account',
            '/user/signup': 'Signup',
            

                        };

                        if (pathname[currentPath]) {
                            document.querySelector('.title').innerText = pathname[currentPath];

                        }
                        let navItem
                        if (currentPath == "/" || currentPath == "/account/promotion" || currentPath == "/account" || currentPath == "/profile") {
                            navItem = document.querySelector(`.nav-item a[href="${currentPath}"]`).parentElement
                        } else {
                            navItem = document.querySelector(`.nav-item a[href="${currentPath}"]`).parentElement.parentElement.parentElement.parentElement
                        }

                        if (navItem) {
                            navItem.classList.add('active');
                        }


    </script>