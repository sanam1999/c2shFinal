<% layout("/layouts/boilerplates.ejs") %>
    <style>
        .body {

            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 75cqb;
        }

        .card {
            background: #282a2c;
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 400px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .card h3 {
            font-size: 1.5rem;
            margin: 0;
            padding: 0;
            text-align: center;
        }


        .card p {
            font-size: 0.9rem;
            margin: 5px 0;
        }

        .card .description {
            font-size: 1.2rem;
            margin: 5px 0;

        }

        .card hr {
            background-color: white;
            padding: 0;
            margin: 0;
        }


        .valid {
            font-size: 1rem;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            text-align: center;

            color: #28a745;
        }

        .invalid {
            font-size: 0.85rem;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            text-align: center;
            color: #d80000;
        }


        .action-btn {
            background-color: #dd0606;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            font-size: 1rem;

            margin-top: 10px;
            align-self: center;
        }

        .btn {
            color: white !important;
            text-align: center;
            font-size: 1rem;

        }

        .action-btn:hover {
            background-color: #ab0404;
        }
    </style>
    <div class="home-header-section">
        <header class="header home-header-section">
            <div class="main-header">
                <div class="container">
                    <nav class="navbar navbar-expand-lg navbar-light p-0">
                        <a class="navbar-brand pt-0" href="/"><img src="/images/redlight-logo.png" alt=""
                                class="logo" /></a>
                        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                            <span class="navbar-toggler-icon"></span>
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav">
                                <li class="nav-item ">
                                    <a class="nav-link text-decoration-none navbar-text-color home-margin-top"
                                        href="/">Home</a>
                                </li>
                                <!-- <span class="sr-only">(current)</span> -->
                                <li class="nav-item">
                                    <a class="nav-link text-decoration-none navbar-text-color"
                                        href="/about">About</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-decoration-none navbar-text-color" href="/und">Membership</a>
                                </li>

                                <li class="nav-item dropdown redlight-dropdown ">
                                    <a class="nav-link dropdown-toggle " href="/und" id="navbarDropdown2" role="button"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Blogs</a>
                                    <div class="dropdown-menu dropdown-content-redlight blogs-section-drop-down">
                                        <ul class="list-unstyled">
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                    href="/und">Events</a></li>
                                          
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                    href="/und">Blogs</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                    href="/und">Projects</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                    href="/und">Notice</a></li>

                                        </ul>
                                    </div>
                                </li>
                                <% if(curUser && (curUser.role =="communityMember" || curUser.role =="admin")){ %>
                                <li class="nav-item dropdown redlight-dropdown ">
                                    <a class="nav-link dropdown-toggle " href="/account" id="navbarDropdown2" role="button"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Control Panel</a>
                                    <div class="dropdown-menu dropdown-content-redlight blogs-section-drop-down">
                                        <ul class="list-unstyled">
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                    href="/admin/distributecertification">Certificate</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                    href="/account">Account</a></li>
                                            <li class="nav-item"> <a class="dropdown-item fierce-menu nav-link"
                                                    href="/account/promotion">Promotion & Users</a></li>
                                           

                                        </ul>
                                    </div>
                                </li>
                                <% } %>
                                <li class="nav-item navbar-text-color "><a
                                        class="nav-link text-decoration-none contact-us-margin navbar-text-color"
                                        href="/und">Courses</a></li>
                                
                                <li class="nav-item ">
                                    <a class="nav-link text-decoration-none navbar-text-color "
                                        href="/contactus">Contact
                                        Us</a>
                                </li>
                            </ul>
                            <hr>

                            <ul class="navbar-nav ">
                                <li class="nav-item dropdown redlight-dropdown">
                                    <a class="nav-link dropdown-toggle " href="/profile" id="navbarDropdown"
                                        role="button" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">Profile</a>

                                    <div class="dropdown-menu dropdown-content-redlight">
                                        <ul class="list-unstyled">
                                            <% if(!curUser){%>
                                                <li class="nav-item"> <a class="dropdown-item nav-link"
                                                        href="/user/login">Login</a>
                                                </li>
                                                <li class="nav-item"> <a class="dropdown-item nav-link"
                                                        href="/user/signup">Signup</a></li>
                                                <% } if(curUser){%>
                                                    <li class="nav-item"> <a class="dropdown-item nav-link"
                                                            href="/profile">Profile</a></li>
                                                    <li class="nav-item"> <a class="dropdown-item nav-link"
                                                            href="/user/logout">Log
                                                            out</a></li>
                                                    <% }%>

                                        </ul>
                                    </div>
                                </li>
                            </ul>

                        </div>
                    </nav>
                </div>
            </div>
        </header>
        <div class="body">
            <!-- Displaying certificate, user, and status information -->
            <div class="card">
                <h3>
                    <%= certificate && certificate.title ? certificate.title.toUpperCase() : 'N/A' %>
                </h3>
                <p class="description">
                    <%= certificate && certificate.description ? certificate.description : 'N/A' %>
                </p>
                <hr>
                <p><strong>Name:</strong>
                    <%= user && user.userInfo && user.userInfo.firstName && user.userInfo.lastName ?
                        (user.userInfo.firstName + " " + user.userInfo.lastName).toUpperCase() : 'N/A' %>
                </p>
                <p><strong>Date:</strong>
                    <%= certificate && certificate.date ? new Date(certificate.date).toISOString().split('T')[0] : 'N/A'
                        %>
                </p>
                <% if (status=="Verified" ) { %>
                    <p><strong>Status:</strong> <span class="valid">
                            <%= status %>
                        </span></p>
                    <a class="action-btn" href="/profile?id=<%=user._id%>"><button class="btn">Check My
                            Profile</button></a>
                    <% } else { %>
                        <p><strong>Status:</strong> <span class="invalid">
                                <%= status %>
                            </span></p>
                        <% } %>
            </div>
        </div>



    </div>


    <script>
        // Get the current page path
        const currentPath = window.location.pathname;

        const pathname = {
            '/profile/edit': 'editprofile',
            '/': 'Home',
            '/user/login': 'Login',
            '/profile': 'Profile',
            '/user/signup': 'Signup',
            '/account': 'Account',
            '/user/signup': 'Signup',
            '/user/signup': 'Signup',

        };

        if (pathname[currentPath]) {
            document.querySelector('.title').innerText = pathname[currentPath];

        }
        let navItem
        if (currentPath == "/" || currentPath == "/account/promotion" || currentPath == "/account" || currentPath == "/profile") {
            navItem = document.querySelector(`.nav-item a[href="${currentPath}"]`).parentElement
        } else {
            navItem = document.querySelector(`.nav-item a[href="${currentPath}"]`).parentElement.parentElement.parentElement.parentElement
        }

        if (navItem) {
            navItem.classList.add('active');
        }


    </script>